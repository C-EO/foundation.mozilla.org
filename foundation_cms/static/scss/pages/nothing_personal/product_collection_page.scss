@use "sass:map";

@import "../../nothing_personal_base";

body.nothing-personal.nothing-personal-product-collection-page {
  .brand-banner {
    margin-top: 0.5rem;
    margin-bottom: 2rem;

    @include breakpoint(large up) {
      margin-top: 1.5rem;
      margin-bottom: 4rem;
    }
  }

  .collection-title {
    margin: 0;
  }

  .collection-description {
    @include mofo-text-style($body-text-styles, "xlarge");
  }

  .grid-container:has(.collection-title) {
    margin-bottom: 3.5rem;

    @include breakpoint(large up) {
      margin-bottom: 4.5rem;
    }
  }

  .collection-products {
    // Configuration variables
    $grid-breakpoints: (
      small: (
        columns: 2,
        gap: 1rem,
      ),
      medium: (
        columns: 3,
        gap: 1rem,
      ),
      large: (
        columns: 4,
        gap: 1.75rem,
      ),
      xlarge: (
        columns: 5,
        gap: 1.75rem,
      ),
    );
    $row-gaps: (
      small: 1.5rem,
      large: 2.75rem,
    );

    // Function to calculate flex-basis
    @function calc-flex-basis($columns, $gap) {
      @return calc(
        #{100% / $columns} - (#{$gap} * #{$columns - 1} / #{$columns})
      );
    }

    display: flex;
    flex-flow: row wrap;
    gap: map.get($row-gaps, small)
      map.get(map.get($grid-breakpoints, small), gap);
    margin-bottom: 2rem;

    @include breakpoint(large up) {
      gap: map.get($row-gaps, large)
        map.get(map.get($grid-breakpoints, large), gap);
      margin-bottom: 4rem;
    }

    .product-review-card {
      $small-config: map.get($grid-breakpoints, small);

      flex: 0 0
        calc-flex-basis(
          map.get($small-config, columns),
          map.get($small-config, gap)
        );

      @each $breakpoint, $config in $grid-breakpoints {
        @if $breakpoint != small {
          @include breakpoint(#{$breakpoint} up) {
            flex: 0 0
              calc-flex-basis(map.get($config, columns), map.get($config, gap));
          }
        }
      }

      &__image-container {
        overflow: hidden;
        position: relative;

        img {
          transition: transform 0.5s ease;

          &:hover {
            transform: scale(105%);
          }
        }
      }
    }
  }
}
